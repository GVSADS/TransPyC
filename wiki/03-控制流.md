# 控制流

## if 语句

### 基本语法

```python
import t

def main() -> t.CInt:
    x: t.CInt = 10
    
    if x > 5:
        x = x + 1
    
    return 0
```

编译后：

```c
int main(void) {
    int x = 10;
    
    if ((x > 5)) {
        x = (x + 1);
    }
    
    return 0;
}
```

### if-else

```python
import t

def main() -> t.CInt:
    x: t.CInt = 10
    
    if x > 5:
        x = x + 1
    else:
        x = x - 1
    
    return 0
```

编译后：

```c
int main(void) {
    int x = 10;
    
    if ((x > 5)) {
        x = (x + 1);
    } else {
        x = (x - 1);
    }
    
    return 0;
}
```

### if-elif-else

```python
import t

def main() -> t.CInt:
    x: t.CInt = 10
    
    if x > 10:
        x = 20
    elif x > 5:
        x = 15
    elif x > 0:
        x = 5
    else:
        x = 0
    
    return 0
```

编译后：

```c
int main(void) {
    int x = 10;
    
    if ((x > 10)) {
        x = 20;
    } else if ((x > 5)) {
        x = 15;
    } else if ((x > 0)) {
        x = 5;
    } else {
        x = 0;
    }
    
    return 0;
}
```

### 嵌套 if

```python
import t

def main() -> t.CInt:
    x: t.CInt = 10
    y: t.CInt = 20
    
    if x > 5:
        if y > 10:
            x = x + y
        else:
            x = x - y
    
    return 0
```

编译后：

```c
int main(void) {
    int x = 10;
    int y = 20;
    
    if ((x > 5)) {
        if ((y > 10)) {
            x = (x + y);
        } else {
            x = (x - y);
        }
    }
    
    return 0;
}
```

## for 循环

### 基本语法

```python
import t

def main() -> t.CInt:
    for i in range(10):
        pass
    
    return 0
```

编译后：

```c
int main(void) {
    for (int i = 0; i < 10; i += 1) {
    }
    
    return 0;
}
```

### 带起始值

```python
import t

def main() -> t.CInt:
    for i in range(5, 10):
        pass
    
    return 0
```

编译后：

```c
int main(void) {
    for (int i = 5; i < 10; i += 1) {
    }
    
    return 0;
}
```

### 带步长

```python
import t

def main() -> t.CInt:
    for i in range(0, 10, 2):
        pass
    
    return 0
```

编译后：

```c
int main(void) {
    for (int i = 0; i < 10; i += 2) {
    }
    
    return 0;
}
```

### 递减循环

```python
import t

def main() -> t.CInt:
    for i in range(10, 0, -1):
        pass
    
    return 0
```

编译后：

```c
int main(void) {
    for (int i = 10; i > 0; i += -1) {
    }
    
    return 0;
}
```

### 循环体

```python
import t

def main() -> t.CInt:
    sum_val: t.CInt = 0
    
    for i in range(10):
        sum_val = sum_val + i
    
    return 0
```

编译后：

```c
int main(void) {
    int sum_val = 0;
    
    for (int i = 0; i < 10; i += 1) {
        sum_val = (sum_val + i);
    }
    
    return 0;
}
```

## while 循环

### 基本语法

```python
import t, c

def main() -> t.CInt:
    i: t.CInt = 0
    
    while i < 10:
        i = i + 1
    
    return 0
```

编译后：

```c
int main(void) {
    int i = 0;
    
    while ((i < 10)) {
        i = (i + 1);
    }
    
    return 0;
}
```

### 无限循环

```python
import t, c

def main() -> t.CInt:
    while True:
        break
    
    return 0
```

编译后：

```c
int main(void) {
    while (1) {
        break;
    }
    
    return 0;
}
```

## do-while 循环

TransPyC 使用特殊的语法表示 do-while 循环：

```python
import t, c

def main() -> t.CInt:
    i: t.CInt = 0
    
    c.DoWhile(i < 10)
        i = i + 1
    
    return 0
```

编译后：

```c
int main(void) {
    int i = 0;
    
    do {
        i = (i + 1);
    } while ((i < 10));
    
    return 0;
}
```

## break 和 continue

### break

```python
import t

def main() -> t.CInt:
    for i in range(10):
        if i == 5:
            break
    
    return 0
```

编译后：

```c
int main(void) {
    for (int i = 0; i < 10; i += 1) {
        if ((i == 5)) {
            break;
        }
    }
    
    return 0;
}
```

### continue

```python
import t

def main() -> t.CInt:
    for i in range(10):
        if i % 2 == 0:
            continue
        pass
    
    return 0
```

编译后：

```c
int main(void) {
    for (int i = 0; i < 10; i += 1) {
        if (((i % 2) == 0)) {
            continue;
        }
    }
    
    return 0;
}
```

## 条件表达式

### 比较运算符

```python
import t

def main() -> t.CInt:
    a: t.CInt = 10
    b: t.CInt = 20
    
    eq: t.CInt = a == b    # 等于
    ne: t.CInt = a != b    # 不等于
    lt: t.CInt = a < b     # 小于
    le: t.CInt = a <= b    # 小于等于
    gt: t.CInt = a > b     # 大于
    ge: t.CInt = a >= b    # 大于等于
    
    return 0
```

编译后：

```c
int main(void) {
    int a = 10;
    int b = 20;
    
    int eq = (a == b);
    int ne = (a != b);
    int lt = (a < b);
    int le = (a <= b);
    int gt = (a > b);
    int ge = (a >= b);
    
    return 0;
}
```

### 逻辑运算符

```python
import t

def main() -> t.CInt:
    a: t.CInt = 1
    b: t.CInt = 0
    
    and_val: t.CInt = a and b   # 逻辑与
    or_val: t.CInt = a or b     # 逻辑或
    not_val: t.CInt = not a     # 逻辑非
    
    return 0
```

编译后：

```c
int main(void) {
    int a = 1;
    int b = 0;
    
    int and_val = (a && b);
    int or_val = (a || b);
    int not_val = (!a);
    
    return 0;
}
```

### 位运算符

```python
import t

def main() -> t.CInt:
    a: t.CInt = 0b1100
    b: t.CInt = 0b1010
    
    and_bits: t.CInt = a & b   # 按位与
    or_bits: t.CInt = a | b    # 按位或
    xor_bits: t.CInt = a ^ b   # 按位异或
    not_bits: t.CInt = ~a      # 按位取反
    left_shift: t.CInt = a << 2  # 左移
    right_shift: t.CInt = a >> 2  # 右移
    
    return 0
```

编译后：

```c
int main(void) {
    int a = 12;
    int b = 10;
    
    int and_bits = (a & b);
    int or_bits = (a | b);
    int xor_bits = (a ^ b);
    int not_bits = (~a);
    int left_shift = (a << 2);
    int right_shift = (a >> 2);
    
    return 0;
}
```

## switch 语句

TransPyC 使用特殊的语法表示 switch 语句：

```python
import t, c

def main() -> t.CInt:
    x: t.CInt = 2
    
    c.Switch(x)
    c.Case(1)
        x = 10
        c.Break()
    c.Case(2)
        x = 20
        c.Break()
    c.Case(3)
        x = 30
        c.Break()
    c.Default()
        x = 0
        c.Break()
    
    return 0
```

编译后：

```c
int main(void) {
    int x = 2;
    
    switch (x) {
        case 1:
            x = 10;
            break;
        case 2:
            x = 20;
            break;
        case 3:
            x = 30;
            break;
        default:
            x = 0;
            break;
    }
    
    return 0;
}
```

## goto 语句

TransPyC 支持 goto 语句：

```python
import t, c

def main() -> t.CInt:
    i: t.CInt = 0
    
    c.Label("loop")
    i = i + 1
    if i < 10:
        c.Goto("loop")
    
    return 0
```

编译后：

```c
int main(void) {
    int i = 0;
    
loop:
    i = (i + 1);
    if ((i < 10)) {
        goto loop;
    }
    
    return 0;
}
```
